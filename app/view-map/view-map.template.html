
<nav-bar></nav-bar>
<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOQQtlEZGiDx8T_3aI8vJt8IZAqcgLYoA&callback=initMap">
</script>
<div class="row">
    <div class="col-xs-12">
        <div class="container-fluid">
            <head>
                <style>
                    #map {
                        height: 400px;
                        width: 100%;
                    }
                </style>
            </head>
            <body>
            <h3>Water</h3>
            <div id="map"></div>
            <script>
                function initMap() {
                    var uluru = {lat: -25.363, lng: 131.044};
                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 4,
                        center: uluru
                    });
                    var marker = new google.maps.Marker({
                        position: uluru,
                        map: map
                    });

                    function placeMarkerAndPanTo(latLng, map) {
                        console.log(latLng);
                        var marker = new google.maps.Marker({
                            position: latLng,
                            map: map
                        });
                        // map.panTo(latLng);
                    }

                    var database = firebase.database();
                    var reportsRef = firebase.database().ref('water-source-reports');
                    reportsRef.on('value', function(snapshot) {
                        var snapshotVal = snapshot.val();
                        var keys = Object.keys(snapshotVal);
                        console.log(keys.length);
                        for (i = 0; i < keys.length; i++) {
                            console.log(snapshotVal[keys[i]]);
                            placeMarkerAndPanTo({lat: snapshotVal[keys[i]].latitude, lng: snapshotVal[keys[i]].longitude}, map)
                        }
                    });
                }

            </script>

            </body>
        </div>
    </div>
</div>